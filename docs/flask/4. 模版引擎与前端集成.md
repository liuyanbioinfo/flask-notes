#  ğŸ“„ 4. æ¨¡æ¿å¼•æ“ä¸å‰ç«¯é›†æˆ 

åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œå‰ç«¯å±•ç¤ºå±‚çš„è®¾è®¡ä¸å®ç°æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®ã€‚Flaské€šè¿‡å¼ºå¤§çš„Jinja2æ¨¡æ¿å¼•æ“ï¼Œä¸ºå¼€å‘è€…æä¾›äº†çµæ´»è€Œé«˜æ•ˆçš„å‰ç«¯é›†æˆè§£å†³æ–¹æ¡ˆã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨å¦‚ä½•æ„å»ºä¼˜é›…ã€å¯ç»´æŠ¤çš„å‰ç«¯æ¶æ„ã€‚

## ğŸ“ 4.1 Jinja2 æ¨¡æ¿è¯­æ³•è¯¦è§£ 

### 4.1.1 æ¨¡æ¿è¯­æ³•åŸºç¡€

Jinja2æ˜¯Flaskçš„é»˜è®¤æ¨¡æ¿å¼•æ“ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„æ¨¡æ¿è¯­æ³•æ¥åŠ¨æ€ç”ŸæˆHTMLå†…å®¹ã€‚

```mermaid
graph TD
    A[Flaskåº”ç”¨] --> B[è·¯ç”±å¤„ç†]
    B --> C[ä¸šåŠ¡é€»è¾‘]
    C --> D[æ•°æ®å‡†å¤‡]
    D --> E[Jinja2æ¨¡æ¿]
    E --> F[HTMLå“åº”]
    F --> G[æµè§ˆå™¨æ¸²æŸ“]
```

**æ ¸å¿ƒè¯­æ³•å…ƒç´ ï¼š**
templates/base.html
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>{{ title or 'é»˜è®¤æ ‡é¢˜' }}</title>
    <meta charset="UTF-8">
</head>
<body>
    <!-- å˜é‡è¾“å‡º -->
    <h1>{{ user.name }}</h1>
    
    <!-- æ¡ä»¶åˆ¤æ–­ -->
    {% if user.is_authenticated %}
        <p>æ¬¢è¿å›æ¥ï¼Œ{{ user.name }}ï¼</p>
    {% else %}
        <p>è¯·å…ˆç™»å½•</p>
    {% endif %}
    
    <!-- å¾ªç¯éå† -->
    <ul>
    {% for post in posts %}
        <li>{{ post.title }} - {{ post.created_at|strftime('%Y-%m-%d') }}</li>
    {% endfor %}
    </ul>
    
    <!-- æ³¨é‡Š -->
    {# è¿™æ˜¯æ¨¡æ¿æ³¨é‡Šï¼Œä¸ä¼šå‡ºç°åœ¨HTMLä¸­ #}
</body>
</html>
```

### 4.1.2 å†…ç½®è¿‡æ»¤å™¨ä¸å‡½æ•°

app.py
```python
from flask import Flask, render_template
from datetime import datetime

app = Flask(__name__)

@app.route('/')
def index():
    posts = [
        {'title': 'Flaskå…¥é—¨', 'content': 'å­¦ä¹ FlaskåŸºç¡€çŸ¥è¯†...', 'created_at': datetime.now()},
        {'title': 'Jinja2æ¨¡æ¿', 'content': 'æŒæ¡æ¨¡æ¿è¯­æ³•...', 'created_at': datetime.now()}
    ]
    return render_template('posts.html', posts=posts)
```

templates/posts.html
```html
<!-- å¸¸ç”¨è¿‡æ»¤å™¨ç¤ºä¾‹ -->
<div class="posts">
{% for post in posts %}
    <article>
        <h2>{{ post.title|title }}</h2>  <!-- é¦–å­—æ¯å¤§å†™ -->
        <p>{{ post.content|truncate(50) }}</p>  <!-- æˆªæ–­æ–‡æœ¬ -->
        <time>{{ post.created_at|strftime('%Yå¹´%mæœˆ%dæ—¥') }}</time>
        <div>å­—æ•°ï¼š{{ post.content|length }}</div>
    </article>
{% endfor %}
</div>
```

## ğŸ—ï¸ 4.2 æ¨¡æ¿ç»§æ‰¿ä¸ç»„ä»¶åŒ–è®¾è®¡ 
### 4.2.1 æ¨¡æ¿ç»§æ‰¿æ¶æ„

æ¨¡æ¿ç»§æ‰¿æ˜¯æ„å»ºå¯ç»´æŠ¤å‰ç«¯çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºåŸºç¡€æ¨¡æ¿å¹¶åœ¨å­æ¨¡æ¿ä¸­æ‰©å±•ã€‚

```mermaid
graph TD
    A[base.html åŸºç¡€æ¨¡æ¿] --> B[layout.html å¸ƒå±€æ¨¡æ¿]
    B --> C[index.html é¦–é¡µ]
    B --> D[post.html æ–‡ç« é¡µ]
    B --> E[user.html ç”¨æˆ·é¡µ]
    A --> F[admin_base.html ç®¡ç†åå°åŸºç¡€]
    F --> G[admin_dashboard.html ä»ªè¡¨æ¿]
```

**åŸºç¡€æ¨¡æ¿è®¾è®¡ï¼š**
templates/base.html
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}é»˜è®¤æ ‡é¢˜{% endblock %} - æˆ‘çš„åšå®¢</title>
    
    <!-- CSSå— -->
    {% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    {% endblock %}
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        {% block navbar %}
        <div class="nav-brand">
            <a href="{{ url_for('index') }}">æˆ‘çš„åšå®¢</a>
        </div>
        <ul class="nav-links">
            <li><a href="{{ url_for('index') }}">é¦–é¡µ</a></li>
            <li><a href="{{ url_for('posts') }}">æ–‡ç« </a></li>
        </ul>
        {% endblock %}
    </nav>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="container">
        {% block content %}{% endblock %}
    </main>
    
    <!-- é¡µè„š -->
    <footer>
        {% block footer %}
        <p>&copy; 2024 æˆ‘çš„åšå®¢. All rights reserved.</p>
        {% endblock %}
    </footer>
    
    <!-- JavaScriptå— -->
    {% block scripts %}
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% endblock %}
</body>
</html>
```

**å­æ¨¡æ¿å®ç°ï¼š**
templates/posts/index.html
```html
{% extends "base.html" %}

{% block title %}æ–‡ç« åˆ—è¡¨{% endblock %}

{% block styles %}
{{ super() }}  <!-- ç»§æ‰¿çˆ¶æ¨¡æ¿çš„æ ·å¼ -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/posts.css') }}">
{% endblock %}

{% block content %}
<div class="posts-container">
    <h1>ğŸ“š æœ€æ–°æ–‡ç« </h1>
    
    {% if posts %}
        {% for post in posts %}
            {% include 'components/post_card.html' %}
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <p>æš‚æ— æ–‡ç« ï¼Œ<a href="{{ url_for('create_post') }}">åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« </a></p>
        </div>
    {% endif %}
</div>
{% endblock %}
```

### 4.2.2 ç»„ä»¶åŒ–è®¾è®¡æ¨¡å¼
templates/components/post_card.html
```html
<!-- å¯å¤ç”¨çš„æ–‡ç« å¡ç‰‡ç»„ä»¶ -->
<article class="post-card">
    <header class="post-header">
        <h2><a href="{{ url_for('post_detail', id=post.id) }}">{{ post.title }}</a></h2>
        <div class="post-meta">
            <span class="author">ğŸ‘¤ {{ post.author.name }}</span>
            <span class="date">ğŸ“… {{ post.created_at|strftime('%Y-%m-%d') }}</span>
            <span class="category">ğŸ·ï¸ {{ post.category.name }}</span>
        </div>
    </header>
    
    <div class="post-excerpt">
        {{ post.content|striptags|truncate(150) }}
    </div>
    
    <footer class="post-footer">
        <div class="post-stats">
            <span>ğŸ‘ï¸ {{ post.views }}</span>
            <span>ğŸ’¬ {{ post.comments|length }}</span>
            <span>â¤ï¸ {{ post.likes }}</span>
        </div>
        <a href="{{ url_for('post_detail', id=post.id) }}" class="read-more">é˜…è¯»æ›´å¤š â†’</a>
    </footer>
</article>
```

## âš™ï¸ 4.3 è‡ªå®šä¹‰è¿‡æ»¤å™¨ä¸å‡½æ•°

### 4.3.1 è‡ªå®šä¹‰è¿‡æ»¤å™¨å¼€å‘
filters.py
```python
from flask import current_app
from datetime import datetime
import re

def init_filters(app):
    """åˆå§‹åŒ–è‡ªå®šä¹‰è¿‡æ»¤å™¨"""
    
    @app.template_filter('timeago')
    def timeago_filter(dt):
        """æ—¶é—´è·ç¦»ç°åœ¨çš„æè¿°"""
        if not isinstance(dt, datetime):
            return dt
            
        now = datetime.now()
        diff = now - dt
        
        if diff.days > 0:
            return f"{diff.days}å¤©å‰"
        elif diff.seconds > 3600:
            return f"{diff.seconds // 3600}å°æ—¶å‰"
        elif diff.seconds > 60:
            return f"{diff.seconds // 60}åˆ†é’Ÿå‰"
        else:
            return "åˆšåˆš"
    
    @app.template_filter('markdown')
    def markdown_filter(text):
        """ç®€å•çš„Markdownæ¸²æŸ“"""
        # ç®€åŒ–çš„Markdownå¤„ç†
        text = re.sub(r'\*\*(.*?)\*\*', r'<strong>\1</strong>', text)
        text = re.sub(r'\*(.*?)\*', r'<em>\1</em>', text)
        text = re.sub(r'`(.*?)`', r'<code>\1</code>', text)
        return text
    
    @app.template_filter('avatar')
    def avatar_filter(user, size=50):
        """ç”Ÿæˆç”¨æˆ·å¤´åƒURL"""
        if user.avatar:
            return user.avatar
        # ä½¿ç”¨Gravatarä½œä¸ºé»˜è®¤å¤´åƒ
        import hashlib
        email_hash = hashlib.md5(user.email.lower().encode()).hexdigest()
        return f"https://www.gravatar.com/avatar/{email_hash}?s={size}&d=identicon"
```

### 4.3.2 å…¨å±€æ¨¡æ¿å‡½æ•°
template_functions.py
```python
from flask import url_for, request

def init_template_functions(app):
    """åˆå§‹åŒ–å…¨å±€æ¨¡æ¿å‡½æ•°"""
    
    @app.template_global()
    def is_active_route(route_name):
        """æ£€æŸ¥å½“å‰è·¯ç”±æ˜¯å¦æ¿€æ´»"""
        return request.endpoint == route_name
    
    @app.template_global()
    def get_menu_items():
        """è·å–å¯¼èˆªèœå•é¡¹"""
        return [
            {'name': 'é¦–é¡µ', 'url': url_for('index'), 'icon': 'ğŸ '},
            {'name': 'æ–‡ç« ', 'url': url_for('posts'), 'icon': 'ğŸ“'},
            {'name': 'åˆ†ç±»', 'url': url_for('categories'), 'icon': 'ğŸ·ï¸'},
            {'name': 'å…³äº', 'url': url_for('about'), 'icon': 'ğŸ‘¤'},
        ]
    
    @app.template_global()
    def pagination_info(pagination):
        """åˆ†é¡µä¿¡æ¯"""
        return {
            'current': pagination.page,
            'total': pagination.pages,
            'has_prev': pagination.has_prev,
            'has_next': pagination.has_next,
            'prev_num': pagination.prev_num,
            'next_num': pagination.next_num
        }
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
templates/components/navbar.html
```html
<nav class="navbar">
    <ul class="nav-menu">
    {% for item in get_menu_items() %}
        <li class="nav-item {{ 'active' if is_active_route(item.url) else '' }}">
            <a href="{{ item.url }}">{{ item.icon }} {{ item.name }}</a>
        </li>
    {% endfor %}
    </ul>
</nav>
```

## ğŸ“¦ 4.4 é™æ€èµ„æºç®¡ç†ä¸ä¼˜åŒ–

### 4.4.1 é™æ€èµ„æºç»„ç»‡ç»“æ„

```mermaid
graph TD
    A[static/] --> B[css/]
    A --> C[js/]
    A --> D[images/]
    A --> E[fonts/]
    A --> F[vendor/]
    
    B --> B1[main.css]
    B --> B2[components/]
    B2 --> B3[navbar.css]
    B2 --> B4[post-card.css]
    
    C --> C1[main.js]
    C --> C2[components/]
    C2 --> C3[modal.js]
    C2 --> C4[form-validator.js]
    
    F --> F1[bootstrap/]
    F --> F2[jquery/]
```

### 4.4.2 èµ„æºç‰ˆæœ¬æ§åˆ¶ä¸ç¼“å­˜
utils/assets.py
```python
import hashlib
import os
from flask import current_app

class AssetManager:
    """é™æ€èµ„æºç®¡ç†å™¨"""
    
    def __init__(self, app=None):
        self.app = app
        self._asset_hashes = {}
        if app:
            self.init_app(app)
    
    def init_app(self, app):
        """åˆå§‹åŒ–èµ„æºç®¡ç†å™¨"""
        app.jinja_env.globals['asset_url'] = self.asset_url
        
        # åœ¨å¼€å‘æ¨¡å¼ä¸‹ç¦ç”¨ç¼“å­˜
        if app.debug:
            app.jinja_env.globals['asset_url'] = self._debug_asset_url
    
    def asset_url(self, filename):
        """ç”Ÿæˆå¸¦ç‰ˆæœ¬å·çš„èµ„æºURL"""
        if filename not in self._asset_hashes:
            self._asset_hashes[filename] = self._get_file_hash(filename)
        
        hash_value = self._asset_hashes[filename]
        return f"/static/{filename}?v={hash_value[:8]}"
    
    def _debug_asset_url(self, filename):
        """å¼€å‘æ¨¡å¼ä¸‹çš„èµ„æºURLï¼ˆå®æ—¶è®¡ç®—hashï¼‰"""
        hash_value = self._get_file_hash(filename)
        return f"/static/{filename}?v={hash_value[:8]}"
    
    def _get_file_hash(self, filename):
        """è®¡ç®—æ–‡ä»¶hashå€¼"""
        filepath = os.path.join(current_app.static_folder, filename)
        if not os.path.exists(filepath):
            return 'missing'
        
        with open(filepath, 'rb') as f:
            return hashlib.md5(f.read()).hexdigest()
```

**æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š**
templates/base.html
```html
<head>
    <!-- ä½¿ç”¨ç‰ˆæœ¬åŒ–çš„èµ„æºURL -->
    <link rel="stylesheet" href="{{ asset_url('css/main.css') }}">
    <link rel="stylesheet" href="{{ asset_url('css/components/navbar.css') }}">
</head>
<body>
    <!-- é¡µé¢å†…å®¹ -->
    
    <script src="{{ asset_url('js/main.js') }}"></script>
    <script src="{{ asset_url('js/components/modal.js') }}"></script>
</body>
```

## âš›ï¸ 4.5 å‰ç«¯æ¡†æ¶é›†æˆï¼ˆVue.jsã€Reactï¼‰

### 4.5.1 Vue.js é›†æˆæ–¹æ¡ˆ

```mermaid
graph LR
    A[Flaskåç«¯] --> B[APIæ¥å£]
    B --> C[JSONæ•°æ®]
    C --> D[Vue.jså‰ç«¯]
    D --> E[ç»„ä»¶æ¸²æŸ“]
    E --> F[ç”¨æˆ·ç•Œé¢]
    
    G[Jinja2æ¨¡æ¿] --> H[åˆå§‹æ•°æ®]
    H --> D
```

**æ··åˆæ¸²æŸ“æ–¹æ¡ˆï¼š**
templates/posts/vue_list.html
```html
{% extends "base.html" %}

{% block content %}
<div id="posts-app">
    <posts-list :initial-posts='{{ posts|tojson }}'></posts-list>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
const { createApp } = Vue;

// Postsåˆ—è¡¨ç»„ä»¶
const PostsList = {
    props: ['initialPosts'],
    data() {
        return {
            posts: this.initialPosts || [],
            loading: false,
            searchQuery: ''
        }
    },
    computed: {
        filteredPosts() {
            if (!this.searchQuery) return this.posts;
            return this.posts.filter(post => 
                post.title.toLowerCase().includes(this.searchQuery.toLowerCase())
            );
        }
    },
    methods: {
        async loadMorePosts() {
            this.loading = true;
            try {
                const response = await fetch('/api/posts?page=' + (this.posts.length / 10 + 1));
                const data = await response.json();
                this.posts.push(...data.posts);
            } catch (error) {
                console.error('åŠ è½½å¤±è´¥:', error);
            } finally {
                this.loading = false;
            }
        }
    },
    template: `
        <div class="posts-container">
            <div class="search-box">
                <input v-model="searchQuery" placeholder="æœç´¢æ–‡ç« ..." class="search-input">
            </div>
            
            <div class="posts-grid">
                <article v-for="post in filteredPosts" :key="post.id" class="post-card">
                    <h3>{{ post.title }}</h3>
                    <p>{{ post.excerpt }}</p>
                    <div class="post-meta">
                        <span>{{ formatDate(post.created_at) }}</span>
                        <span>{{ post.author }}</span>
                    </div>
                </article>
            </div>
            
            <button @click="loadMorePosts" :disabled="loading" class="load-more-btn">
                {{ loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š' }}
            </button>
        </div>
    `
};

// åˆ›å»ºVueåº”ç”¨
createApp({
    components: {
        PostsList
    }
}).mount('#posts-app');
</script>
{% endblock %}
```

### 4.5.2 APIç«¯ç‚¹è®¾è®¡
api/posts.py
```python
from flask import Blueprint, jsonify, request
from models import Post

api_bp = Blueprint('api', __name__, url_prefix='/api')

@api_bp.route('/posts')
def get_posts():
    """è·å–æ–‡ç« åˆ—è¡¨API"""
    page = request.args.get('page', 1, type=int)
    per_page = request.args.get('per_page', 10, type=int)
    search = request.args.get('search', '')
    
    query = Post.query
    if search:
        query = query.filter(Post.title.contains(search))
    
    pagination = query.paginate(
        page=page, per_page=per_page, error_out=False
    )
    
    return jsonify({
        'posts': [{
            'id': post.id,
            'title': post.title,
            'excerpt': post.content[:150] + '...',
            'author': post.author.name,
            'created_at': post.created_at.isoformat(),
            'url': url_for('post_detail', id=post.id)
        } for post in pagination.items],
        'pagination': {
            'page': page,
            'pages': pagination.pages,
            'has_next': pagination.has_next,
            'has_prev': pagination.has_prev
        }
    })
```

## ğŸ¨ 4.6 CSS æ¡†æ¶é›†æˆï¼ˆBootstrapã€Tailwind CSSï¼‰

### 4.6.1 Bootstrap é›†æˆ
templates/base_bootstrap.html
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - Bootstrap Blog</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">ğŸ“ æˆ‘çš„åšå®¢</a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'index' }}" href="{{ url_for('index') }}">é¦–é¡µ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'posts' }}" href="{{ url_for('posts') }}">æ–‡ç« </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- ä¸»è¦å†…å®¹ -->
    <main class="container my-5">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    </main>
    
    <!-- é¡µè„š -->
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center">
            <p class="text-muted mb-0">&copy; 2024 æˆ‘çš„åšå®¢. All rights reserved.</p>
        </div>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
```

### 4.6.2 Tailwind CSS é›†æˆ
templates/base_tailwind.html
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - Tailwind Blog</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#64748B'
                    }
                }
            }
        }
    </script>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="{{ url_for('index') }}" class="text-xl font-bold text-primary">
                        ğŸ“ æˆ‘çš„åšå®¢
                    </a>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="{{ url_for('index') }}" 
                           class="{{ 'text-primary border-b-2 border-primary' if request.endpoint == 'index' else 'text-gray-600 hover:text-primary' }} px-3 py-2 text-sm font-medium transition-colors">
                            é¦–é¡µ
                        </a>
                        <a href="{{ url_for('posts') }}" 
                           class="{{ 'text-primary border-b-2 border-primary' if request.endpoint == 'posts' else 'text-gray-600 hover:text-primary' }} px-3 py-2 text-sm font-medium transition-colors">
                            æ–‡ç« 
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- ä¸»è¦å†…å®¹ -->
    <main class="flex-1 max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 w-full">
        <!-- Flashæ¶ˆæ¯ -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-6">
                    {% for category, message in messages %}
                        <div class="{{ 'bg-red-50 border-red-200 text-red-800' if category == 'error' else 'bg-green-50 border-green-200 text-green-800' }} border rounded-lg p-4 mb-4">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    {% if category == 'error' %}
                                        âŒ
                                    {% else %}
                                        âœ…
                                    {% endif %}
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium">{{ message }}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    </main>
    
    <!-- é¡µè„š -->
    <footer class="bg-white border-t">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-gray-500 text-sm">
                &copy; 2024 æˆ‘çš„åšå®¢. All rights reserved.
            </p>
        </div>
    </footer>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
```

### 4.6.3 å“åº”å¼ç»„ä»¶ç¤ºä¾‹
templates/components/post_grid.html
```html
<!-- Bootstrapç‰ˆæœ¬ -->
<div class="row g-4">
{% for post in posts %}
    <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
            {% if post.featured_image %}
            <img src="{{ post.featured_image }}" class="card-img-top" alt="{{ post.title }}">
            {% endif %}
            
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ post.title }}</h5>
                <p class="card-text text-muted flex-grow-1">{{ post.excerpt }}</p>
                
                <div class="d-flex justify-content-between align-items-center mt-auto">
                    <small class="text-muted">{{ post.created_at|timeago }}</small>
                    <a href="{{ url_for('post_detail', id=post.id) }}" class="btn btn-primary btn-sm">é˜…è¯»æ›´å¤š</a>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
</div>

<!-- Tailwindç‰ˆæœ¬ -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
{% for post in posts %}
    <article class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden">
        {% if post.featured_image %}
        <img src="{{ post.featured_image }}" alt="{{ post.title }}" class="w-full h-48 object-cover">
        {% endif %}
        
        <div class="p-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-2 line-clamp-2">
                <a href="{{ url_for('post_detail', id=post.id) }}" class="hover:text-primary transition-colors">
                    {{ post.title }}
                </a>
            </h3>
            
            <p class="text-gray-600 text-sm mb-4 line-clamp-3">{{ post.excerpt }}</p>
            
            <div class="flex items-center justify-between">
                <span class="text-xs text-gray-500">{{ post.created_at|timeago }}</span>
                <a href="{{ url_for('post_detail', id=post.id) }}" 
                   class="inline-flex items-center text-primary hover:text-primary-dark text-sm font-medium">
                    é˜…è¯»æ›´å¤š 
                    <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        </div>
    </article>
{% endfor %}
</div>
```

## ğŸ“‹ å°ç»“

é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº†Flaskæ¨¡æ¿å¼•æ“ä¸å‰ç«¯é›†æˆçš„æ ¸å¿ƒæ¦‚å¿µï¼š

- **ğŸ¯ Jinja2è¯­æ³•**ï¼šæŒæ¡äº†å˜é‡è¾“å‡ºã€æ§åˆ¶ç»“æ„ã€è¿‡æ»¤å™¨ç­‰æ ¸å¿ƒè¯­æ³•
- **ğŸ—ï¸ æ¨¡æ¿ç»§æ‰¿**ï¼šå­¦ä¼šäº†æ„å»ºå¯ç»´æŠ¤çš„æ¨¡æ¿æ¶æ„å’Œç»„ä»¶åŒ–è®¾è®¡
- **âš™ï¸ è‡ªå®šä¹‰æ‰©å±•**ï¼šäº†è§£äº†å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰è¿‡æ»¤å™¨å’Œå…¨å±€å‡½æ•°
- **ğŸ“¦ èµ„æºç®¡ç†**ï¼šæŒæ¡äº†é™æ€èµ„æºçš„ç»„ç»‡ã€ç‰ˆæœ¬æ§åˆ¶å’Œä¼˜åŒ–ç­–ç•¥
- **âš›ï¸ æ¡†æ¶é›†æˆ**ï¼šå­¦ä¹ äº†ä¸ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆVue.jsã€Reactï¼‰çš„é›†æˆæ–¹æ¡ˆ
- **ğŸ¨ CSSæ¡†æ¶**ï¼šäº†è§£äº†Bootstrapå’ŒTailwind CSSçš„é›†æˆä¸ä½¿ç”¨

è¿™äº›æŠ€èƒ½å°†ä¸ºæ„å»ºç°ä»£åŒ–ã€å¯ç»´æŠ¤çš„Webåº”ç”¨å¥ å®šåšå®çš„åŸºç¡€ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨è¡¨å•å¤„ç†ä¸æ•°æ®éªŒè¯çš„æœ€ä½³å®è·µã€‚